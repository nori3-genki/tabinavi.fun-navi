<?php
/**
 * ペルソナ設定クラス
 * 
 * 8種類のペルソナ別詳細描写指示を提供
 * 
 * @package HRS
 * @version 6.0.0
 */

if (!defined('ABSPATH')) {
    exit;
}

class HRS_Persona_Config {

    private static $instance = null;

    public static function get_instance() {
        if (null === self::$instance) {
            self::$instance = new self();
        }
        return self::$instance;
    }

    /**
     * ペルソナラベル
     */
    private $persona_labels = array(
        'family'    => 'ファミリー層',
        'couple'    => 'カップル',
        'solo'      => '一人旅',
        'senior'    => 'シニア層',
        'luxury'    => 'ラグジュアリー志向',
        'budget'    => 'コスパ重視層',
        'general'   => '一般',
        'workation' => 'ワーケーション層',
    );

    /**
     * ペルソナラベルを取得
     */
    public function get_persona_label($persona) {
        return $this->persona_labels[$persona] ?? '一般';
    }

    /**
     * 全ペルソナラベルを取得
     */
    public function get_all_persona_labels() {
        return $this->persona_labels;
    }

    /**
     * ペルソナ適用（詳細描写指示強化版）
     */
    public function apply_persona($persona) {
        $personas = array(
            // ===== 一般・観光 =====
            'general' => "【想定読者: 一般・観光】
幅広い読者向けに、初めて訪れる人の視点でバランスの取れた情報を提供してください。

■ 視点・描写パターン
・初訪問者の「発見」と「驚き」を軸に描写
・「想像以上だった」「予想を裏切る良さ」など期待超えの表現
・誰もが共感できる普遍的な魅力（景色、食事、サービス）

■ 時間軸ストーリーのポイント
・到着時の第一印象（外観、エントランス、ロビー）
・チェックイン体験とスタッフの対応
・客室に入った瞬間の感想
・食事のハイライト
・翌朝の気持ちよい目覚め

■ 含めるべき実用情報
・アクセス方法と所要時間
・周辺の観光スポットとの組み合わせ
・おすすめの季節や時期
・予約時の注意点やおすすめプラン\n\n",

            // ===== 一人旅 =====
            'solo' => "【想定読者: 一人旅】
自由な時間を楽しみたい一人旅の読者向けに、静かに過ごせる空間やセルフケアの魅力を描写してください。

■ 視点・描写パターン
・「自分だけの時間」「誰にも邪魔されない贅沢」を軸に
・内省や自己対話が生まれる瞬間の描写
・一人だからこそ気づける細やかな発見
・「ふと窓の外を眺めながら」「静寂の中で」などの表現

■ 時間軸ストーリーのポイント
・一人でチェックインする心地よさ
・客室で荷物を解き、自分のペースで過ごし始める瞬間
・一人で楽しむ食事（カウンター席、個室など）
・夜、自分と向き合う静かな時間
・朝、誰にも急かされず目覚める解放感

■ 含めるべき実用情報
・一人でも気まずくない食事環境
・おひとり様プランの有無
・一人で楽しめる館内施設（読書スペース、ラウンジ等）
・周辺の一人散策スポット\n\n",

            // ===== カップル・夫婦 =====
            'couple' => "【想定読者: カップル・夫婦】
二人の時間を大切にしたいカップル向けに、ロマンチックな雰囲気や記念日に最適なポイントを描写してください。

■ 視点・描写パターン
・「二人だけの特別な時間」「共有する感動」を軸に
・会話が生まれるシーンの描写
・「二人で顔を見合わせて微笑んだ」「一緒に眺めた」などの表現
・非日常の中で深まる絆の瞬間

■ 時間軸ストーリーのポイント
・二人で到着した時のワクワク感
・客室に入り、景色や設備に二人で感動
・ディナーでの会話と美食体験
・夜景や星空を二人で眺める時間
・翌朝、一緒に迎える穏やかな目覚め

■ 含めるべき実用情報
・記念日プラン・アニバーサリー特典
・カップル向け客室（ツイン→ダブル変更可など）
・貸切風呂・プライベート空間
・写真撮影スポット\n\n",

            // ===== ファミリー =====
            'family' => "【想定読者: ファミリー】
子連れ家族向けに、子どもの反応と親の安心感を軸に描写してください。

■ 視点・描写パターン（必須）
・子どもの目線での体験描写を必ず含める
・「目を輝かせて」「夢中になって」「大はしゃぎで」など子どもの反応
・親子の会話や触れ合いの具体的シーン
・「パパ見て！」「ママこれ美味しい！」など子どもの声
・親が感じる安心感と満足感

■ 時間軸ストーリーのポイント
・到着時、子どもが最初に反応したもの
・チェックイン中の子どもの様子（キッズスペース等）
・客室での子どもの探検・発見
・夕食時の家族団らんシーン
・お風呂での親子時間
・就寝前のリラックスタイム
・翌朝、元気に目覚める子どもたち

■ 含めるべき実用情報
・キッズ向け設備（ベビーベッド、子ども用アメニティ、踏み台等）
・子連れに嬉しいサービス（食べ放題、キッズメニュー、貸切風呂）
・子どもが楽しめるアクティビティ
・安全面への配慮（角の処理、段差など）
・ベビーカー対応、授乳室の有無\n\n",

            // ===== シニア世代 =====
            'senior' => "【想定読者: シニア世代】
落ち着いた大人旅を好むシニア向けに、安心感と上質な時間の流れを描写してください。

■ 視点・描写パターン
・「ゆったりとした時間」「心身を労わる」を軸に
・急がない、慌てない時間の贅沢さ
・長年の経験があるからこそ分かる本物の価値
・懐かしさや郷愁を感じる瞬間
・「ようやくこんな旅ができる年齢になった」という感慨

■ 時間軸ストーリーのポイント
・余裕を持った到着と丁寧な出迎え
・客室での落ち着いたひととき
・身体に優しい食事をゆっくり味わう時間
・温泉でじっくり身体を温める
・早めに休み、ぐっすり眠る心地よさ
・早朝の静かな時間を楽しむ

■ 含めるべき実用情報
・バリアフリー設備（手すり、段差、エレベーター）
・和洋室の選択肢（ベッド派も安心）
・食事の配慮（量の調整、アレルギー対応）
・館内の移動距離と休憩スポット
・近隣の医療機関情報\n\n",

            // ===== ワーケーション =====
            'workation' => "【想定読者: ワーケーション】
仕事と休暇を両立したいビジネスパーソン向けに、ON/OFFの切り替えを描写してください。

■ 視点・描写パターン
・「集中」と「解放」のコントラストを軸に
・いつもと違う環境だからこそ生まれる発想
・仕事後のご褒美感と達成感
・「オンライン会議の背景が絶景」などユニークな体験

■ 時間軸ストーリーのポイント
・到着後すぐにワークスペースを確認
・午前中の集中作業タイム
・ランチで気分転換
・午後のオンライン会議
・仕事終了後の切り替え儀式（温泉、散歩など）
・夕食で一日の疲れを癒す
・翌朝、リフレッシュした状態で仕事再開

■ 含めるべき実用情報
・Wi-Fi速度と安定性
・ワークスペースの有無（デスク、椅子、電源）
・オンライン会議に適した環境
・長期滞在プラン
・近隣のカフェやコワーキングスペース\n\n",

            // ===== ラグジュアリー =====
            'luxury' => "【想定読者: ラグジュアリー】
最高級の体験を求める読者向けに、細部へのこだわりと特別扱いの実感を描写してください。

■ 視点・描写パターン
・「一流」「本物」「洗練」を軸に
・細部に宿るこだわりへの気づき
・言葉にしなくても伝わるサービスの質
・「さすが」「やはり違う」という納得感
・五感すべてで感じる贅沢

■ 時間軸ストーリーのポイント
・到着時の格別な出迎え
・客室に入った瞬間の「格の違い」
・アメニティやリネンの質感
・ディナーの一皿一皿に込められた技
・夜のバーやラウンジでの大人の時間
・翌朝、上質な目覚めと朝食

■ 含めるべき実用情報
・客室のグレードと違い
・専用ラウンジ、クラブフロア特典
・スパ・エステの内容
・記念日や特別な機会の対応力
・ドレスコードの有無\n\n",

            // ===== コスパ重視 =====
            'budget' => "【想定読者: コスパ重視】
賢くお得に旅したい読者向けに、「価格以上の価値」の発見を描写してください。

■ 視点・描写パターン
・「この価格でこれは嬉しい」「予想外の充実」を軸に
・お得感の具体的な根拠
・「正直期待していなかったけど」からの好転
・賢い選択をした自分への満足感

■ 時間軸ストーリーのポイント
・予約時の「この価格で大丈夫？」という不安
・到着して「意外としっかりしている」という発見
・客室の清潔さと必要十分な設備
・食事の量と質のバランス
・追加料金なしで楽しめる施設
・チェックアウト時の「また来たい」という気持ち

■ 含めるべき実用情報
・お得なプランや割引情報
・無料で使える施設・サービス
・食事付きプランとの比較
・周辺の安くて美味しい飲食店
・連泊割引や早割情報\n\n",
        );

        return $personas[$persona] ?? $personas['general'];
    }
}